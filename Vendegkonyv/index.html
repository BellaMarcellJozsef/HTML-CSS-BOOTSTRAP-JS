<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <title>Firebase</title>
</head>
<body>
    <form id="message-form">
        <h1>Vendégkönyv</h1>
        <label for="nev">Név</label>
        <br>
        <input type="text" name="nev" id="nev">
        <br>
        <br>
        <label for="uzenet">Üzenet</label>
        <br>
        <input type="text" name="uzenet" id="uzenet">
        <br>
        <br>
        <input type="submit" value="Üzenet elküldése" class="btn btn-primary">
        <br>
    </form>
    <script src="https://www.gstatic.com/firebasejs/9.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.8.1/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAQjlBIU6MRO_rRDGFB2smIfYDA5ns8s2w",
            authDomain: "vendegkonyv-58f00.firebaseapp.com",
            projectId: "vendegkonyv-58f00",
            storageBucket: "vendegkonyv-58f00.appspot.com",
            messagingSenderId: "101309278040",
            appId: "1:101309278040:web:44110525e13ac5ae46272d"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        document.getElementById('message-form').addEventListener('submit', function (e){
            e.preventDefault();
            const name = document.getElementById('nev').value;
            const message = document.getElementById('uzenet').value;

            db.collection("vendegkonyv").add({
                        nev: name,
                        uzenet: message
            })
        });
    </script>
    <form>
        <br>
        <h2>Üzenet szerkesztése</h2>
        <br>
        <label for="azonosito">Azonosító</label>
        <br>
        <input type="text" name="azonosito" id="azonosito">
        <br>
        <br>
        <label for="nev">Név</label>
        <br>
        <input type="text" name="nev_frissites" id="nev_frissites">
        <br>
        <br>
        <label for="uzenet">Üzenet</label>
        <br>
        <input type="text" name="uzenet_frissites" id="uzenet_frissites">
        <br>
        <br>
        <input type="submit" value="Frissítés" class="btn btn-info" onclick="update()">
        <input type="submit" value="Mégse" class="btn btn-secondary">
    </form>
    <script>
        function update(){
            if (docId) {
                    const docRef = db.collection("vendegkonyv").doc(docId);
                    docRef.update({
                        nev: document.getElementById['nev_frissites'].value,
                        uzenet: document.getElementById['uzenet_frissites'].value
                    }).then(() => {
                        console.log("Document updated with ID: ", docRef.id)
                    }).catch(error => {
                        console.error("Error updating document: ", error);
                    });
            }
        }
    </script>
</body>
</html>